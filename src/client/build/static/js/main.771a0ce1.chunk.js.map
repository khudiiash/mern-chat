{"version":3,"sources":["redux/reducers/attachments.js","redux/reducers/dialogs.js","redux/reducers/messages.js","redux/reducers/user.js","assets/img/wave.svg","assets/img/play.svg","assets/img/pause.svg","assets/img/read.svg","assets/img/unread.svg","redux/reducers sync /^/.*$","core/axios.js","utils/api/dialogs.js","utils/api/messages.js","utils/api/user.js","utils/api/files.js","core/socket.js","redux/actions/dialogs.js","redux/actions/messages.js","utils/helpers/validateField.js","utils/helpers/timeFromNow.js","utils/helpers/generateAvatarFromName.js","utils/helpers/openNotification.js","utils/helpers/isAudio.js","redux/actions/user.js","redux/actions/attachments.js","containers/Dialogs.js","containers/Messages.js","containers/ChatInput.js","containers/Status.js","containers/Sidebar.js","containers/AvatarMain.js","components/Sidebar/index.js","components/Button/index.js","components/Block/index.js","components/Message/index.jsx","utils/helpers/convertCurrentTime.js","components/Messages/index.js","components/DialogItem/index.jsx","components/Time/index.js","components/IconRead/index.js","components/Dialogs/index.js","components/Avatar/index.js","components/AvatarMain/index.js","components/Status/index.js","components/ChatInput/index.js","components/FormField/index.jsx","components/UploadFiles/index.jsx","modules/LoginForm/components/LoginForm.jsx","utils/validate.js","redux/store.js","modules/LoginForm/index.js","modules/LoginForm/containers/LoginForm.js","modules/RegisterForm/components/RegisterForm.jsx","modules/RegisterForm/index.js","modules/RegisterForm/containers/RegisterForm.js","pages/Auth/components/CheckEmailInfo.jsx","pages/Auth/index.jsx","pages/Home/index.jsx","App.js","index.js","redux/reducers/index.js"],"names":["initialState","items","__webpack_exports__","state","arguments","length","undefined","_ref","type","payload","Object","C_Users_onema_Downloads_chat_client_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","filter","item","uid","currentDialogId","window","location","pathname","split","isLoading","typingInDialogWithId","map","dialog","_id","dialogId","lastMessage","read","C_Users_onema_Downloads_chat_client_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__","concat","C_Users_onema_Downloads_chat_client_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__","allItems","message","data","token","localStorage","isAuth","avatar","last_seen","Date","isOnline","current_dialog_id","module","exports","__webpack_require__","p","./","./attachments","./attachments.js","./dialogs","./dialogs.js","./index","./index.js","./messages","./messages.js","./user","./user.js","webpackContext","req","id","webpackContextResolve","e","Error","code","keys","resolve","axios","defaults","baseURL","origin","headers","common","api_dialogs","get","partner","text","post","delete","api_messages","attachments","dialog_id","api_user","postData","hash","query","api_files","file","formData","FormData","append","Content-Type","socket","io","replace","Actions","setDialogs","setTypingInDialogWithId","updateReadStatus","userId","setCurrentDialogId","dispatch","emit","fetchDialogs","dialogsApi","then","_ref2","deleteDialog","setAllMessages","setMessages","addMessage","getState","dialogs","fetchSendMessage","messagesApi","setIsLoading","bool","removeMessageById","confirm","catch","fetchMessages","_ref3","validateField","key","touched","errors","timeFromNow","time","settings","includeSeconds","addSuffix","locale","ru","formatDistance","generateAvatarFromName","name","_name$substr$split$ma","substr","char","number","charCodeAt","toString","parseInt","charAt","_name$substr$split$ma2","slicedToArray","r","g","b","color","tinycolor","lighten","saturate","toHexString","colorLighten","openNotification","_ref$type","title","_ref$duration","duration","notification","description","isAudio","ext","setUserData","setIsAuth","setAvatar","setCurrentDialog","setOnline","setOffline","fetchUserData","userApi","err","response","status","fetchUserLogin","fetchUserRegister","setAttachments","removeAttachment","connect","objectSpread","dialogsActions","messagesActions","user","res","author","receiver_id","_useState","useState","_useState2","inputValue","setValue","_useState3","Array","from","_useState4","filtered","setFilteredItems","onChangeInput","value","fullName","toLowerCase","indexOf","useEffect","messages","forEach","push","m","apply","on","removeListener","react_default","a","createElement","components_Dialogs","onSearch","currentDialog","find","date","me","empty","useSelector","previewImage","setPreviewImage","blockHeight","setBlockHeight","_useState5","_useState6","isTyping","setIsTyping","typingTimeoutId","messagesRef","useRef","onNewMessage","obj","clearInterval","setTimeout","toggleIsTyping","current","scrollTo","components_Messages","blockRef","onRemoveMessage","_ref5","attachmentsActions","props","navigator","getUserMedia","mozGetUserMedia","msGetUserMedia","webkitGetUserMedia","isRecording","setIsRecording","mediaRecorder","setMediaRecorder","_useState7","_useState8","emojiPickerVisible","setShowEmojiPicker","_useState9","_useState10","setLoading","onRecording","stream","recorder","MediaRecorder","start","onstart","onstop","ondataavailable","File","filesApi","sendAudio","onError","console","log","handleOutsideClick","el","contains","target","audioId","sendMessage","stop","onSelectFiles","asyncToGenerator","regenerator_default","mark","_callee","files","uploaded","_loop","i","wrap","_context2","prev","next","_context","Math","round","random","toConsumableArray","_ref4","filename","url","delegateYield","_x","this","document","querySelector","addEventListener","bind","removeEventListener","components_ChatInput","toggleEmojiPicker","addEmoji","colons","trim","handleSendMessage","keyCode","onRecord","audio","onHideRecording","history","currentDialogObj","components_Status","deleteDialogById","userActions","allMessages","visible","setVisible","setInputValue","messageText","setMessageText","users","setUsers","_useState11","_useState12","selectedUserId","setSelectedUserId","onClose","components_Sidebar","onShow","onSelectUser","onModalOk","onChangeTextArea","onLogout","clear","reload","onSelectAvatar","_x2","components_AvatarMain","Option","Select","TextArea","Input","Sidebar","options","className","containers_AvatarMain","es_button","onClick","shape","icon","containers_Dialogs","modal","onCancel","footer","disabled","loading","es_form","Item","label","es_select","onChange","onSelect","notFoundContent","style","width","defaultActiveFirstOption","showArrow","filterOption","placeholder","showSearch","autoSize","minRows","maxRows","defaultProps","Button","assign","classNames","button--large","size","Block","children","MessageAudio","audioSrc","audioElem","isPlaying","setIsPlaying","progress","setProgress","currentTime","setCurrentTime","volume","ref","src","preload","pause","play","pauseSvg","alt","playSvg","waveSvg","mins","floor","secs","toFixed","convertCurrentTime","Message","isMe","includes","message--isme","message--is-typing","message--is-audio","message--image","components_IconRead","isRead","popover","content","trigger","es_icon","components_Avatar","reactStringReplace","match","dist_es","emoji","set","components_Time","fontSize","Message_MessageAudio","renderAttachment","Messages","height","messages--loading","spin","tip","components_Message","createdAt","DialogItem","unread","newLastMessage","react_router_dom","to","dialogs__item--online","dialogs__item--selected","renderLastMessage","Time","isToday","format","IconRead","readSvg","unreadSvg","Dialogs","input","Search","orderBy","components_DialogItem","image","Empty","PRESENTED_IMAGE_SIMPLE","Avatar","_generateAvatarFromNa","firstChar","toUpperCase","background","AvatarMain","dist","onFiles","containerProps","uploadProps","accept","multiple","opacity","Status","ChatInput","react","emojiTag","ChatInput_TextArea","onKeyUp","position","top","components_UploadFiles","FormField","handleChange","handleBlur","values","validateStatus","help","hasFeedback","prefix","onBlur","getBase64","Promise","reject","reader","FileReader","readAsDataURL","onload","result","onerror","error","UploadFiles","previewVisible","fileList","setState","handlePreview","preview","originFileObj","sent","es_upload","action","listType","onPreview","onRemove","LoginForm","handleSubmit","isValid","isSubmitting","components_Block","onSubmit","email","password","components_Button","utils_validate","rules","test","password_2","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","middleware","thunk","store","createStore","rootReducer","applyMiddleware","withFormik","enableReinitialize","mapPropsToValues","validate","validateForm","setSubmitting","displayName","RegisterForm","components_FormField","renderTextInfo","verified","CheckEmailInfo","search","setVerified","checking","setChecking","info","setInfo","setStatus","subTitle","extra","Auth","react_router","exact","path","component","withRouter","pop","containers_Sidebar","containers_Status","containers_Messages","containers_ChatInput","render","pages_Home","ReactDOM","es","src_App","getElementById","redux__WEBPACK_IMPORTED_MODULE_0__","combineReducers","reduce","initial","require","default"],"mappings":"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","file":"static/js/main.771a0ce1.chunk.js","sourcesContent":["const initialState = {\n  items: []\n};\n\nexport default (state = initialState, { type, payload }) => {\n  switch (type) {\n    case \"ATTACHMENTS:SET_ITEMS\":\n      return {\n        ...state,\n        items: payload\n      };\n    case \"ATTACHMENTS:REMOVE_ITEM\":\n      return {\n        ...state,\n        items: state.items.filter(item => item.uid !== payload.uid)\n      };\n    default:\n      return state;\n  }\n};\n","const initialState = {\n  items: [],\n  currentDialogId: window.location.pathname.split('dialog/')[1],\n  isLoading: false,\n};\n\nexport default (state = initialState, { type, payload }) => {\n  switch (type) {\n    case 'DIALOGS:SET_ITEMS':\n      return {\n        ...state,\n        items: payload,\n      };\n    case 'DIALOGS:SET_TYPING_IN_DIALOG':\n      return {\n        ...state,\n        typingInDialogWithId: payload\n    };\n    case 'DIALOGS:LAST_MESSAGE_READ_STATUS':\n      return {\n        ...state,\n        items: state.items.map(dialog => {\n          if (dialog._id === payload.dialogId && payload.currentDialogId === payload.dialogId) {\n            dialog.lastMessage.read = true;\n          }\n          return dialog;\n        }),\n      };\n    case 'DIALOGS:SET_CURRENT_DIALOG_ID':\n      return {\n        ...state,\n        currentDialogId: payload,\n      };\n    case 'DIALOGS:DELETE_DIALOG':\n      return {\n      ...state,\n      items:state.items.filter(dialog => dialog._id !== payload)\n      };\n    default:\n      return state;\n  }\n};\n","const initialState = {\n  items: [],\n  isLoading: false,\n};\n\nexport default (state = initialState, { type, payload }) => {\n  switch (type) {\n    case 'MESSAGES:ADD_MESSAGE':\n      return {\n        ...state,\n        items: [...state.items, payload],\n      };\n    case 'MESSAGES:SET_ALL_ITEMS':\n      return {\n        ...state,\n        allItems: payload,\n        isLoading: false,\n      };\n    case 'MESSAGES:SET_ITEMS':\n      return {\n        ...state,\n        items: payload,\n        isLoading: false,\n      };\n    case 'DIALOGS:LAST_MESSAGE_READ_STATUS':\n      return {\n        ...state,\n        items: state.items.map(message => {\n          if (message.dialog._id === payload.dialogId) {\n            message.read = true;\n          }\n          return message;\n        }),\n      };\n    case 'MESSAGES:REMOVE_MESSAGE':\n      return {\n        ...state,\n        items: state.items.filter(message => message._id !== payload),\n      };\n    case 'MESSAGES:SET_IS_LOADING':\n      return {\n        ...state,\n        isLoading: payload,\n      };\n    default:\n      return state;\n  }\n};\n","const initialState = {\n  data: null,\n  token: window.localStorage.token,\n  isAuth: !!window.localStorage.token\n};\n\nexport default (state = initialState, { type, payload }) => {\n  switch (type) {\n    case \"USER:SET_DATA\":\n      return {\n        ...state,\n        data: payload,\n        isAuth: true,\n        token: window.localStorage.token\n      };\n    case \"USER:SET_AVATAR\":\n      return {\n        ...state,\n        data: {...state.data,\n          avatar:payload.avatar},\n      };\n    case \"USER:SET_IS_AUTH\":\n      return {\n        ...state,\n        isAuth: payload\n      };\n    case \"USER:SET_ONLINE\":\n      return {\n        ...state,\n        data: {...state.data,\n          last_seen:new Date(),isOnline:true},\n      };\n    case \"USER:SET_CURRENT_DIALOG\":\n      return {\n        ...state,\n        data: {...state.data,\n          current_dialog_id:payload},\n      };\n    case \"USER:SET_OFFLINE\":\n      return {\n        ...state,\n        data: {...state.data,\n          last_seen:new Date(),isOnline:false},\n      };\n    default:\n      return state;\n  }\n};\n","module.exports = __webpack_public_path__ + \"static/media/wave.2b8196a5.svg\";","module.exports = __webpack_public_path__ + \"static/media/play.65f03140.svg\";","module.exports = __webpack_public_path__ + \"static/media/pause.a61933e8.svg\";","module.exports = __webpack_public_path__ + \"static/media/read.c1f419d6.svg\";","module.exports = __webpack_public_path__ + \"static/media/unread.3c841bf6.svg\";","var map = {\n\t\"./\": 97,\n\t\"./attachments\": 239,\n\t\"./attachments.js\": 239,\n\t\"./dialogs\": 240,\n\t\"./dialogs.js\": 240,\n\t\"./index\": 97,\n\t\"./index.js\": 97,\n\t\"./messages\": 241,\n\t\"./messages.js\": 241,\n\t\"./user\": 242,\n\t\"./user.js\": 242\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) { // check for number or string\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn id;\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 549;","import axios from \"axios\";\n\naxios.defaults.baseURL = window.location.origin;\naxios.defaults.headers.common[\"token\"] = window.localStorage.token;\n\nwindow.axios = axios;\n\nexport default axios;\n","import { axios } from \"core\";\n\nexport default {\n  getAll: () => axios.get(\"/dialogs\"),\n  getOneById: id => axios.get(`dialogs/${id}`),\n  create: ({ partner, text }) => axios.post(\"/dialogs\", { partner, text }),\n  delete: id => axios.delete(`/dialogs/${id}`),\n};\n","import { axios } from \"core\";\n\nexport default {\n  getAll: () => axios.get('/messages/get-all'),\n  getAllByDialogId: id => axios.get(\"/messages?dialog=\" + id),\n  removeById: id => axios.delete(\"/messages?id=\" + id),\n  send: (text, dialogId, attachments) =>\n    axios.post(\"/messages\", {\n      text: text,\n      dialog_id: dialogId,\n      attachments\n    })\n};\n","import { axios } from \"core\";\n\nexport default {\n  signIn: postData => axios.post(\"/user/signin\", postData),\n  signUp: postData => axios.post(\"/user/signup\", postData),\n  verifyHash: hash => axios.get(\"/user/verify?hash=\" + hash),\n  getMe: () => axios.get(\"/user/me\"),\n  findUsers: query => axios.get(\"/user/find?query=\" + query),\n  setAvatar: data =>  axios.post(\"/user/setAvatar\", data),\n  setOnline: data => axios.post(\"/user/setOnline\", data),\n  setOffline: data =>  axios.post(\"/user/setOffline\", data),\n  setCurrentDialog: data => axios.post(`/user/setCurrentDialog`,data),\n\n};\n","import { axios } from \"core\";\n\nexport default {\n  upload: file => {\n    const formData = new FormData();\n    formData.append(\"file\", file);\n    return axios.post(\"/files\", formData, {\n      headers: {\n        \"Content-Type\": \"multipart/form-data\"\n      }\n    });\n  }\n};\n","import io from \"socket.io-client\";\n\nconst socket = io(window.location.origin.replace(\"3000\", \"3003\"));\n\nexport default socket;\n","import { dialogsApi } from 'utils/api';\nimport socket from 'core/socket';\n\nconst Actions = {\n  setDialogs: items => ({\n    type: 'DIALOGS:SET_ITEMS',\n    payload: items,\n  }),\n  setTypingInDialogWithId: id => ({\n    type: 'DIALOGS:SET_TYPING_IN_DIALOG',\n    payload: id\n  }),\n  updateReadStatus: ({ userId, dialogId }) => {\n   \n    return({\n    type: 'DIALOGS:LAST_MESSAGE_READ_STATUS',\n    payload: {\n      userId,\n      dialogId,\n    },\n  })},\n  setCurrentDialogId: id => dispatch => {\n    socket.emit('DIALOGS:JOIN', id);\n    dispatch({\n      type: 'DIALOGS:SET_CURRENT_DIALOG_ID',\n      payload: id,\n    });\n  },\n  fetchDialogs: () => dispatch => {\n    dialogsApi.getAll().then(({ data }) => {\n      dispatch(Actions.setDialogs(data));\n    });\n  },\n  deleteDialog: id => dispatch => {\n    dialogsApi.delete(id)\n    dispatch({\n      type: 'DIALOGS:DELETE_DIALOG',\n      payload: id,\n    });\n  }\n};\n\nexport default Actions;\n","import { messagesApi } from \"utils/api\";\n\nconst Actions = {\n  setAllMessages: items =>  ({\n    type: \"MESSAGES:SET_ALL_ITEMS\",\n    payload: items\n  }),\n  setMessages: items => ({\n    type: \"MESSAGES:SET_ITEMS\",\n    payload: items\n  }),\n  addMessage: message => (dispatch, getState) => {\n    const { dialogs } = getState();\n    const { currentDialogId } = dialogs;\n\n    if (currentDialogId === message.dialog._id) {\n      dispatch({\n        type: \"MESSAGES:ADD_MESSAGE\",\n        payload: message\n      });\n    }\n  },\n  fetchSendMessage: ({ text, dialogId, attachments }) => dispatch => {\n    return messagesApi.send(text, dialogId, attachments);\n  },\n  setIsLoading: bool => ({\n    type: \"MESSAGES:SET_IS_LOADING\",\n    payload: bool\n  }),\n  removeMessageById: id => dispatch => {\n    if (window.confirm(\"Вы действительно хотите удалить сообщение?\")) {\n      messagesApi\n        .removeById(id)\n        .then(({ data }) => {\n          dispatch({\n            type: \"MESSAGES:REMOVE_MESSAGE\",\n            payload: id\n          });\n        })\n        .catch(() => {\n          dispatch(Actions.setIsLoading(false));\n        });\n    }\n  },\n\n  fetchMessages: dialogId => dispatch => {\n    dispatch(Actions.setIsLoading(true));\n    messagesApi\n      .getAllByDialogId(dialogId)\n      .then(({ data }) => {\n        dispatch(Actions.setMessages(data));\n      })\n      .catch(() => {\n        dispatch(Actions.setIsLoading(false));\n      });\n  }\n};\n\nexport default Actions;\n","export default (key, touched, errors) => {\n  if (touched[key]) {\n    if (errors[key]) {\n      return \"error\";\n    } else {\n      return \"success\";\n    }\n  } else {\n    return \"\";\n  }\n};\n","import formatDistance from 'date-fns/formatDistance'\r\nimport { ru } from 'date-fns/locale'\r\n\r\nconst timeFromNow = time => {\r\n  let settings = {\r\n    includeSeconds: false,\r\n    addSuffix: false,\r\n    locale: ru\r\n  }\r\n   \r\n  return time ? `${formatDistance(new Date(time), new Date(), settings)} назад`.replace(/около /,''):'';\r\n\r\n  };\r\n  \r\nexport default timeFromNow;","import tinycolor from \"tinycolor2\";\n\nconst getCorrectIndex = number => {\n  if (number > 255 && number.toString().length === 4) {\n    return parseInt(number.toString().charAt(0)+number.toString().substr(2,3));\n  }\n  if (number < 0) {\n    return 0;\n  }\n  return number > 255 ? 255 : number < 0 ? 0 : number;\n};\n\nexport default name => {\n  const [r, g, b] = name\n    .substr(0, 3)\n    .split(\"\")\n    .map(char => getCorrectIndex(char.charCodeAt(0)));\n  return {\n    color: tinycolor({ r, g, b })\n      .lighten(10)\n      .saturate(10)\n      .toHexString(),\n    colorLighten: tinycolor({ r, g, b })\n      .lighten(30)\n      .saturate(30)\n      .toHexString()\n  };\n};\n","import { notification } from 'antd';\n\nexport default ({ text, type = 'info', title, duration = 3 }) =>\n  notification[type]({\n    message: title,\n    description: text,\n    duration,\n  });\n","export default attachments => {\n  if (!attachments) {\n    return null;\n  }\n  const file = attachments[0];\n  return attachments.length && file.ext === \"webm\";\n};\n","import { openNotification } from 'utils/helpers';\nimport { userApi } from 'utils/api';\n\nconst Actions = {\n  setUserData: data => ({\n    type: 'USER:SET_DATA',\n    payload: data,\n  }),\n  setIsAuth: bool => ({\n    type: 'USER:SET_IS_AUTH',\n    payload: bool,\n  }),\n  setAvatar: data => ({\n    type: 'USER:SET_AVATAR',\n    payload: data,\n  }),\n  setCurrentDialog: data => ({\n    type: 'USER:SET_CURRENT_DIALOG',\n    payload: data,\n  }),\n  setOnline: data => ({\n    type: 'USER:SET_ONLINE',\n    payload: data,\n  }),\n  setOffline: data => ({\n    type: 'USER:SET_OFFLINE',\n    payload: data,\n  }),\n  fetchUserData: () => dispatch => {\n    userApi\n      .getMe()\n      .then(({ data }) => {\n        dispatch(Actions.setUserData(data));\n      })\n      .catch(err => {\n        if (err.response.status === 403) {\n          dispatch(Actions.setIsAuth(false));\n          delete window.localStorage.token;\n        }\n      });\n  },\n  fetchUserLogin: postData => dispatch => {\n    return userApi\n      .signIn(postData)\n      .then(({ data }) => {\n        const { token } = data;\n        openNotification({\n          title: 'Отлично!',\n          text: 'Авторизация успешна.',\n          type: 'success',\n        });\n        window.axios.defaults.headers.common['token'] = token;\n        window.localStorage['token'] = token;\n        dispatch(Actions.fetchUserData());\n        dispatch(Actions.setIsAuth(true));\n        return data;\n      })\n      .catch(({ response }) => {\n        openNotification({\n          title: 'Ошибка при авторизации',\n          text: 'Неверный логин или пароль',\n          type: 'error',\n        });\n      });\n  },\n  fetchUserRegister: postData => () => {\n    return userApi.signUp(postData);\n  },\n};\n\nexport default Actions;\n","const Actions = {\n  setAttachments: items => ({\n    type: \"ATTACHMENTS:SET_ITEMS\",\n    payload: items\n  }),\n  removeAttachment: file => ({\n    type: \"ATTACHMENTS:REMOVE_ITEM\",\n    payload: file\n  })\n};\n\nexport default Actions;\n","import React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\n\nimport { dialogsActions, messagesActions} from 'redux/actions';\nimport socket from 'core/socket';\nimport { Dialogs as BaseDialogs } from 'components';\nimport { userApi, dialogsApi, messagesApi } from '../utils/api';\n\nconst Dialogs = ({ fetchDialogs, updateReadStatus, currentDialogId, items, userId, user, setAllMessages }) => {\n  \n  if ( user && currentDialogId ) {\n    dialogsApi.getOneById(currentDialogId)\n      .then(res => {\n        user.current_dialog_id = currentDialogId\n        if (res.data.author === user._id) {\n          user.receiver_id = res.data.partner\n        } else if (res.data.partner === user._id) {\n          user.receiver_id = res.data.author\n        }\n        \n          userApi.setCurrentDialog(user)\n      })\n  }\n  const [inputValue, setValue] = useState('');\n  const [filtered, setFilteredItems] = useState(Array.from(items));\n\n  \n  const onSetAllMessages = (dialogs ) => {\n    messagesApi.getAll()\n    .then(res => {\n      let messages = []\n      dialogs.forEach(dialog => {\n        messages.push(res.data.filter(m => m.dialog === dialog._id))\n      })\n      messages = [].concat.apply([],messages)\n      setAllMessages(messages)\n  })\n  }\n  const onChangeInput = (value = '') => {\n    setFilteredItems(\n      items.filter(\n        dialog =>\n          dialog.author.fullName.toLowerCase().indexOf(value.toLowerCase()) >= 0 ||\n          dialog.partner.fullName.toLowerCase().indexOf(value.toLowerCase()) >= 0,\n      ),\n    );\n    setValue(value);\n  };\n\n  window.fetchDialogs = fetchDialogs;\n \n\n  useEffect(() => {\n    if (items.length) {\n      onChangeInput();\n      onSetAllMessages(items)\n    }\n  }, [items]);\n\n  useEffect(() => {\n    fetchDialogs();\n    socket.on('SERVER:DIALOG_CREATED', fetchDialogs);\n    socket.on('SERVER:NEW_MESSAGE', fetchDialogs);\n    socket.on('SERVER:MESSAGES_READ', updateReadStatus);\n    \n    \n    return () => {\n      socket.removeListener('SERVER:DIALOG_CREATED', fetchDialogs);\n      socket.removeListener('SERVER:NEW_MESSAGE', fetchDialogs);\n    };\n  }, []);\n  return (\n    <BaseDialogs\n      userId={userId}\n      items={filtered}\n      onSearch={onChangeInput}\n      inputValue={inputValue}\n      currentDialogId={currentDialogId}\n    />\n  );\n};\n\nexport default connect(\n  ({ dialogs }) => dialogs,\n  {...dialogsActions, ...messagesActions}\n)(Dialogs);\n","import React, { useEffect, useState, useRef } from 'react';\nimport { connect, useSelector } from 'react-redux';\nimport { Empty } from 'antd';\nimport find from 'lodash/find';\n\nimport { messagesActions, dialogsActions } from 'redux/actions';\nimport socket from 'core/socket';\n\nimport { Messages as BaseMessages } from 'components';\n\nconst Messages = ({\n  currentDialog,\n  fetchMessages,\n  addMessage,\n  items,\n  user,\n  isLoading,\n  removeMessageById,\n  attachments,\n  me,\n  setTypingInDialogWithId\n}) => {\n  if (!currentDialog) {\n\n    return <Empty description=\"Откройте диалог\" />;\n    \n  }\n  let typingInDialogWithId = useSelector(state => state.dialogs.typingInDialogWithId)\n  \n  \n  const [previewImage, setPreviewImage] = useState(null);\n  const [blockHeight, setBlockHeight] = useState(135);\n  const [isTyping, setIsTyping] = useState(false);\n  let typingTimeoutId = null;\n\n  const messagesRef = useRef(null);\n\n  const onNewMessage = data => {\n    addMessage(data);\n  };\n\n  const toggleIsTyping = (obj) => {\n    setTypingInDialogWithId(obj.dialogId)\n    setIsTyping(true);\n    clearInterval(typingTimeoutId);\n    typingTimeoutId = setTimeout(() => {\n      setIsTyping(false);\n      setTypingInDialogWithId(undefined)\n    }, 2000);\n  };\n\n  useEffect(() => {\n    socket.on('DIALOGS:TYPING', (obj) => toggleIsTyping(obj));\n  }, []);\n\n  useEffect(() => {\n    if (attachments.length) {\n      setBlockHeight(245);\n    } else {\n      setBlockHeight(135);\n    }\n  }, [attachments]);\n\n  useEffect(() => {\n    if (currentDialog) {\n      fetchMessages(currentDialog._id);\n    }\n   \n    socket.on('SERVER:NEW_MESSAGE', onNewMessage);\n\n    return () => socket.removeListener('SERVER:NEW_MESSAGE', onNewMessage);\n  }, [currentDialog]);\n\n  useEffect(() => {\n    messagesRef.current.scrollTo(0, 999999);\n  }, [items, isTyping]);\n\n  return (\n    <BaseMessages\n      user={user}\n      me={me}\n      blockRef={messagesRef}\n      items={items}\n      isLoading={isLoading && !user}\n      onRemoveMessage={removeMessageById}\n      setPreviewImage={setPreviewImage}\n      previewImage={previewImage}\n      blockHeight={blockHeight}\n      isTyping={isTyping}\n      currentDialog={currentDialog}\n      typingInDialogWithId={typingInDialogWithId}\n      partner={\n        user._id === currentDialog.partner._id ? currentDialog.author : currentDialog.partner\n      }\n    />\n  );\n};\n\nexport default connect(\n  ({ dialogs, messages, user, attachments }) => ({\n    currentDialog: find(dialogs.items, { _id: dialogs.currentDialogId }),\n    items: messages.items,\n    isLoading: messages.isLoading,\n    attachments: attachments.items,\n    date: messages.date,\n    user: user.data,\n  }),\n  {...messagesActions, ...dialogsActions}\n)(Messages);\n","import React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { filesApi } from 'utils/api';\nimport socket from 'core/socket';\n\nimport { ChatInput as ChatInputBase } from 'components';\n\nimport { messagesActions, attachmentsActions } from 'redux/actions';\n\nconst ChatInput = props => {\n  const {\n    dialogs: { currentDialogId },\n    attachments,\n    fetchSendMessage,\n    setAttachments,\n    removeAttachment,\n    user,\n  } = props;\n\n  if (!currentDialogId) {\n    return null;\n  }\n\n  window.navigator.getUserMedia =\n    window.navigator.getUserMedia ||\n    window.navigator.mozGetUserMedia ||\n    window.navigator.msGetUserMedia ||\n    window.navigator.webkitGetUserMedia;\n\n  const [value, setValue] = useState('');\n  const [isRecording, setIsRecording] = useState('');\n  const [mediaRecorder, setMediaRecorder] = useState(null);\n  const [emojiPickerVisible, setShowEmojiPicker] = useState(false);\n  const [isLoading, setLoading] = useState(false);\n\n  const toggleEmojiPicker = () => {\n    setShowEmojiPicker(!emojiPickerVisible);\n  };\n\n  const onRecord = () => {\n    if (navigator.getUserMedia) {\n      navigator.getUserMedia({ audio: true }, onRecording, onError);\n    }\n  };\n\n  const onRecording = stream => {\n    const recorder = new MediaRecorder(stream);\n    setMediaRecorder(recorder);\n\n    recorder.start();\n\n    recorder.onstart = () => {\n      setIsRecording(true);\n    };\n\n    recorder.onstop = () => {\n      setIsRecording(false);\n    };\n\n    recorder.ondataavailable = e => {\n      const file = new File([e.data], 'audio.webm');\n      setLoading(true);\n      filesApi.upload(file).then(({ data }) => {\n        sendAudio(data.file._id).then(() => {\n          setLoading(false);\n        });\n      });\n    };\n  };\n\n  const onError = err => {\n    console.log(err);\n  };\n\n  const handleOutsideClick = (el, e) => {\n    if (el && !el.contains(e.target)) {\n      setShowEmojiPicker(false);\n    }\n  };\n\n  const addEmoji = ({ colons }) => {\n    setValue((value + ' ' + colons).trim());\n  };\n\n  const sendAudio = audioId => {\n    return fetchSendMessage({\n      text: null,\n      dialogId: currentDialogId,\n      attachments: [audioId],\n    });\n  };\n\n  const sendMessage = () => {\n    if (isRecording) {\n      mediaRecorder.stop();\n    } else if (value || attachments.length) {\n      fetchSendMessage({\n        text: value,\n        dialogId: currentDialogId,\n        attachments: attachments.map(file => file.uid),\n      });\n      setValue('');\n      setAttachments([]);\n    }\n  };\n\n  const handleSendMessage = e => {\n    socket.emit('DIALOGS:TYPING', { dialogId: currentDialogId, user });\n    if (e.keyCode === 13) {\n      sendMessage();\n    }\n  };\n\n  const onHideRecording = () => {\n    setIsRecording(false);\n  };\n\n  const onSelectFiles = async files => {\n    let uploaded = [];\n    for (let i = 0; i < files.length; i++) {\n      const file = files[i];\n      const uid = Math.round(Math.random() * 1000);\n      uploaded = [\n        ...uploaded,\n        {\n          uid,\n          name: file.name,\n          status: 'uploading',\n        },\n      ];\n      setAttachments(uploaded);\n      // eslint-disable-next-line no-loop-func\n      await filesApi.upload(file).then(({ data }) => {\n        uploaded = uploaded.map(item => {\n          if (item.uid === uid) {\n            return {\n              status: 'done',\n              uid: data.file._id,\n              name: data.file.filename,\n              url: data.file.url,\n            };\n          }\n          return item;\n        });\n      });\n    }\n    setAttachments(uploaded);\n  };\n\n  useEffect(() => {\n    const el = document.querySelector('.chat-input__smile-btn');\n    document.addEventListener('click', handleOutsideClick.bind(this, el));\n    return () => {\n      document.removeEventListener('click', handleOutsideClick.bind(this, el));\n    };\n  }, []);\n\n  return (\n    <ChatInputBase\n      value={value}\n      setValue={setValue}\n      emojiPickerVisible={emojiPickerVisible}\n      toggleEmojiPicker={toggleEmojiPicker}\n      addEmoji={addEmoji}\n      handleSendMessage={handleSendMessage}\n      sendMessage={sendMessage}\n      onSelectFiles={onSelectFiles}\n      attachments={attachments}\n      isRecording={isRecording}\n      onRecord={onRecord}\n      onHideRecording={onHideRecording}\n      isLoading={isLoading}\n      removeAttachment={removeAttachment}\n    />\n  );\n};\n\nexport default connect(\n  ({ dialogs, attachments, user }) => ({\n    dialogs,\n    attachments: attachments.items,\n    user: user.data,\n  }),\n  { ...messagesActions, ...attachmentsActions },\n)(ChatInput);\n","import React from \"react\";\nimport { Status as StatusBase } from \"components\";\nimport { connect } from \"react-redux\";\nimport { dialogsActions } from 'redux/actions'\n\nconst Status = props => {\n  let { currentDialogId, \n    user, \n    dialogs,\n    deleteDialog,\n    history\n  } = props\n\n  const deleteDialogById = (id) => {\n    deleteDialog(id)\n    history.push('/')\n  }\n  \n  if (!dialogs.length || !currentDialogId) {\n    return null;\n  }\n\n  const currentDialogObj = dialogs.filter(\n    dialog => dialog._id === currentDialogId\n  )[0];\n\n  let partner = {};\n  if (currentDialogObj) {\n    if (currentDialogObj.author._id === user._id) {\n      partner = currentDialogObj.partner;\n    } else {\n      partner = currentDialogObj.author;\n    }\n  }\n \n\n  return <StatusBase partner={partner} deleteDialogById={deleteDialogById} />;\n};\n\nexport default connect(({ dialogs, user }) => ({\n  dialogs: dialogs.items,\n  currentDialogId: dialogs.currentDialogId,\n  user: user.data\n}),{ ...dialogsActions },\n)(Status);\n","import React, { useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { userApi, dialogsApi } from \"utils/api\";\nimport { userActions } from \"redux/actions\";\n\nimport { Sidebar } from \"components\";\n\nconst SidebarContainer = ({ user,setOffline,allMessages }) => {\n  const [visible, setVisible] = useState(false);\n  const [inputValue, setInputValue] = useState(\"\");\n  const [messageText, setMessageText] = useState(\"\");\n  const [users, setUsers] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [selectedUserId, setSelectedUserId] = useState(false);\n\n  const onClose = () => {\n    setVisible(false);\n  };\n\n  const onShow = () => {\n    setVisible(true);\n  };\n\n  const onSearch = value => {\n    setIsLoading(true);\n    userApi\n      .findUsers(value)\n      .then(({ data }) => {\n        setUsers(data);\n        setIsLoading(false);\n      })\n      .catch(() => {\n        setIsLoading(false);\n      });\n  };\n\n  const onAddDialog = () => {\n    dialogsApi\n      .create({\n        partner: selectedUserId,\n        text: messageText\n      })\n      .then(onClose)\n      .catch(() => {\n        setIsLoading(false);\n      });\n  };\n\n  const handleChangeInput = value => {\n    setInputValue(value);\n  };\n\n  const onChangeTextArea = e => {\n    setMessageText(e.target.value);\n  };\n\n  const onSelectUser = userId => {\n    setSelectedUserId(userId);\n  };\n  const onLogout = user => {\n    userApi.setOffline(user)\n    setOffline(user)\n    window.localStorage.clear()\n    window.location.reload();\n    \n  }\n\n  return (\n    <Sidebar\n      allMessages={allMessages}\n      user={user}\n      inputValue={inputValue}\n      visible={visible}\n      isLoading={isLoading}\n      onClose={onClose}\n      onShow={onShow}\n      onSearch={onSearch}\n      onChangeInput={handleChangeInput}\n      onSelectUser={onSelectUser}\n      onModalOk={onAddDialog}\n      onChangeTextArea={onChangeTextArea}\n      onLogout={onLogout}\n      messageText={messageText}\n      selectedUserId={selectedUserId}\n      users={users}\n    />\n  );\n};\n\nexport default connect(({ user }) => ({ user: user.data }),{...userActions})(SidebarContainer);\n","import React, {  useState } from 'react';\r\nimport { AvatarMain as AvatarMainBase } from \"components\";\r\nimport { connect } from \"react-redux\";\r\nimport { userActions } from 'redux/actions'\r\nimport { filesApi, userApi } from 'utils/api';\r\n\r\n\r\n\r\nconst AvatarMain = props => {\r\n    let {setAvatar,user} = props\r\n\r\n    const [previewImage, setPreviewImage] = useState(null)\r\n\r\n    const onSelectAvatar = async (files, data) => {\r\n  \r\n        let uploaded = [];\r\n        for (let i = 0; i < files.length; i++) {\r\n          const file = files[i];\r\n          const uid = Math.round(Math.random() * 1000);\r\n          uploaded = [\r\n            ...uploaded,\r\n            {\r\n              uid,\r\n              name: file.name,\r\n              status: 'uploading',\r\n            },\r\n          ];\r\n          // eslint-disable-next-line no-loop-func\r\n          await filesApi.upload(file).then(({ data }) => {\r\n            uploaded = uploaded.map(item => {\r\n              if (item.uid === uid) {\r\n                return {\r\n                  status: 'done',\r\n                  uid: data.file._id,\r\n                  name: data.file.filename,\r\n                  url: data.file.url,\r\n                };\r\n              }\r\n              return item;\r\n            });\r\n          });\r\n        }\r\n        if (uploaded) {\r\n          let url = uploaded[0].url\r\n          data.avatar = url\r\n\r\n          setAvatar(data) // update avatar in the state\r\n          userApi.setAvatar(data) // send avatar to the server\r\n        }\r\n       \r\n      };\r\n \r\n     return <AvatarMainBase \r\n        user={user}\r\n        onSelectAvatar={onSelectAvatar}\r\n        previewImage={previewImage}\r\n        setPreviewImage={setPreviewImage}\r\n  />;\r\n};\r\n\r\nexport default connect(({avatar}) => ({avatar}),{ ...userActions },\r\n)(AvatarMain);\r\n","import React from 'react';\nimport { Button, Modal, Select, Input, Form } from 'antd';\nimport { Dialogs } from 'containers';\nimport { AvatarMain } from 'containers'\n\nimport './Sidebar.scss';\n\nconst { Option } = Select;\nconst { TextArea } = Input;\n\nconst Sidebar = ({\n  user,\n  visible,\n  inputValue,\n  messageText,\n  selectedUserId,\n  isLoading,\n  users,\n  onShow,\n  onClose,\n  onSearch,\n  onChangeInput,\n  onSelectUser,\n  onChangeTextArea,\n  onModalOk,\n  onLogout,\n  allMessages\n}) => {\n  const options = users.map(user => <Option key={user._id}>{user.fullName}</Option>);\n\n\n  return (\n    <div className=\"chat__sidebar\">\n      <div className=\"chat__sidebar-header\">\n        <div className='chat__sidebar-header-me'>\n          {user &&\n            (<AvatarMain user={user} />)\n\n          }\n          <span className='chat__sidebar-header-me-name'>{user ? user.fullName : ''}</span>\n        </div>\n        <div className='chat__sidebar-header-buttons'>\n          <Button className='chat__sidebar-header-logout' onClick={() => onLogout(user)}\n            type='link' shape=\"circle\" icon='logout' title='Выход' />\n          <Button className='chat__sidebar-header-new-chat' onClick={onShow} type=\"link\" shape=\"circle\" icon=\"form\" title='Cоздать новый чат' />\n        </div>\n\n      </div>\n\n      <div className=\"chat__sidebar-dialogs\">\n        <Dialogs userId={user && user._id} user={user} allMessages={allMessages} />\n      </div>\n      <Modal\n        title=\"Создать диалог\"\n        visible={visible}\n        onCancel={onClose}\n        footer={[\n          <Button key=\"back\" onClick={onClose}>\n            Закрыть\n          </Button>,\n          <Button\n            disabled={!messageText}\n            key=\"submit\"\n            type=\"primary\"\n            loading={isLoading}\n            onClick={onModalOk}>\n            Создать\n          </Button>,\n        ]}>\n        <Form className=\"add-dialog-form\">\n          <Form.Item className='ant-modal-label' label=\"Введите имя пользователя или E-Mail\">\n            <Select\n              value={inputValue}\n              onSearch={onSearch}\n              onChange={onChangeInput}\n              onSelect={onSelectUser}\n              notFoundContent={null}\n              style={{ width: '100%' }}\n              defaultActiveFirstOption={false}\n              showArrow={false}\n              filterOption={false}\n              placeholder=\"Введите имя пользователя или почту\"\n              showSearch>\n              {options}\n            </Select>\n          </Form.Item>\n          {selectedUserId && (\n            <Form.Item label=\"Введите текст сообщения\">\n              <TextArea\n                autoSize={{ minRows: 3, maxRows: 10 }}\n                onChange={onChangeTextArea}\n                value={messageText}\n              />\n            </Form.Item>\n          )}\n        </Form>\n      </Modal>\n    </div>\n  );\n};\n\nSidebar.defaultProps = {\n  users: [],\n};\n\nexport default Sidebar;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Button as BaseButton } from \"antd\";\nimport classNames from \"classnames\";\n\nimport \"./Button.scss\";\n\nconst Button = props => (\n  <BaseButton\n    {...props}\n    className={classNames(\"button\", props.className, {\n      \"button--large\": props.size === \"large\"\n    })}\n  />\n);\n\nButton.propTypes = {\n  className: PropTypes.string\n};\n\nexport default Button;\n","import React from \"react\";\nimport classNames from \"classnames\";\n\nimport \"./Block.scss\";\n\nconst Block = ({ children, className }) => (\n  <div className={classNames(\"block\", className)}>{children}</div>\n);\n\nexport default Block;\n","import React, { useState, useRef, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport { Popover, Button, Icon } from \"antd\";\nimport { Emoji } from \"emoji-mart\";\nimport reactStringReplace from \"react-string-replace\";\n\nimport { convertCurrentTime, isAudio } from \"utils/helpers\";\n\nimport waveSvg from \"assets/img/wave.svg\";\nimport playSvg from \"assets/img/play.svg\";\nimport pauseSvg from \"assets/img/pause.svg\";\n\nimport { Time, IconRead, Avatar } from \"../\";\n\nimport \"./Message.scss\";\nimport { useSelector } from \"react-redux\";\n\nconst MessageAudio = ({ audioSrc }) => {\n  const audioElem = useRef(null);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [progress, setProgress] = useState(0);\n  const [currentTime, setCurrentTime] = useState(0);\n\n  const togglePlay = () => {\n    if (!isPlaying) {\n      audioElem.current.play();\n    } else {\n      audioElem.current.pause();\n    }\n  };\n\n  useEffect(() => {\n    audioElem.current.volume = \"0.01\";\n    audioElem.current.addEventListener(\n      \"playing\",\n      () => {\n        setIsPlaying(true);\n      },\n      false\n    );\n    audioElem.current.addEventListener(\n      \"ended\",\n      () => {\n        setIsPlaying(false);\n        setProgress(0);\n        setCurrentTime(0);\n      },\n      false\n    );\n    audioElem.current.addEventListener(\n      \"pause\",\n      () => {\n        setIsPlaying(false);\n      },\n      false\n    );\n    audioElem.current.addEventListener(\"timeupdate\", () => {\n      const duration = (audioElem.current && audioElem.current.duration) || 0;\n      setCurrentTime(audioElem.current.currentTime);\n      setProgress((audioElem.current.currentTime / duration) * 100);\n    });\n  }, []);\n  return (\n    <div className=\"message__audio\">\n      <audio ref={audioElem} src={audioSrc} preload=\"auto\" />\n      <div\n        className=\"message__audio-progress\"\n        style={{ width: progress + \"%\" }}\n      />\n      <div className=\"message__audio-info\">\n        <div className=\"message__audio-btn\">\n          <button onClick={togglePlay}>\n            {isPlaying ? (\n              <img src={pauseSvg} alt=\"Pause svg\" />\n            ) : (\n              <img src={playSvg} alt=\"Play svg\" />\n            )}\n          </button>\n        </div>\n        <div className=\"message__audio-wave\">\n          <img src={waveSvg} alt=\"Wave svg\" />\n        </div>\n        <span className=\"message__audio-duration\">\n          {convertCurrentTime(currentTime)}\n        </span>\n      </div>\n    </div>\n  );\n};\n\nconst Message = ({\n  _id,\n  user,\n  text,\n  date,\n  isMe,\n  read,\n  attachments,\n  isTyping,\n  onRemoveMessage,\n  setPreviewImage\n}) => {\n\n if (text.includes('Тестовое сообщение') && read) console.log('прочитано');\n else if (text.includes('Тестовое сообщение') && !read) console.log(\"не прочитано\")\n let messages = useSelector(state => state.messages.items)\n if (messages) {\n   let message = messages.find(m => m._id === _id)\n   console.log(message)\n }\n\n  const renderAttachment = item => {\n    if (item.ext !== \"webm\") {\n      return (\n        <div\n          key={item._id}\n          onClick={() => setPreviewImage(item.url)}\n          className=\"message__attachments-item\"\n        >\n          <div className=\"message__attachments-item-overlay\">\n            <Icon type=\"eye\" style={{ color: \"white\", fontSize: 18 }} />\n          </div>\n\n          <img src={item.url} alt={item.filename} />\n        </div>\n      );\n    } else {\n      return <MessageAudio key={item._id} audioSrc={item.url} />;\n    }\n  };\n\n  return (\n    <div\n      className={classNames(\"message\", {\n        \"message--isme\": isMe,\n        \"message--is-typing\": isTyping,\n        \"message--is-audio\": isAudio(attachments),\n        \"message--image\":\n          !isAudio(attachments) &&\n          attachments &&\n          attachments.length === 1 &&\n          !text\n      })}\n    >\n      <div className=\"message__content\">\n        <IconRead isMe={isMe} isRead={read} />\n        <Popover\n          content={\n            <div>\n              <Button type=\"danger\" onClick={onRemoveMessage}>\n                Удалить сообщение\n              </Button>\n            </div>\n          }\n          trigger=\"click\"\n        >\n          <div className=\"message__icon-actions\">\n            <Button type=\"link\" shape=\"circle\">\n              <Icon type=\"ellipsis\" className=\"message__icon-actions-icon\" />\n            </Button>\n          </div>\n        </Popover>\n        <div className=\"message__avatar\">\n          <Avatar user={user} />\n        </div>\n        <div className=\"message__info\">\n          {(text || isTyping) && (\n            <div className=\"message__bubble\">\n              {text && (\n                <p className=\"message__text\">\n                  {reactStringReplace(text, /:(.+?):/g, (match, i) => (\n                    <Emoji key={i} emoji={match} set=\"apple\" size={16} />\n                  ))}\n                </p>\n              )}\n              {date && (\n                <span className=\"message__date\">\n                  <Time date={date} />\n                </span>\n              )}\n\n              {isTyping && (\n                <div className=\"message__typing\">\n                  <span />\n                  <span />\n                  <span />\n                </div>\n              )}\n              {false && <MessageAudio audioSrc={null} />}\n            </div>\n          )}\n\n          {attachments && (\n            <div className=\"message__attachments\">\n              {attachments.map(item => renderAttachment(item))}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nMessage.defaultProps = {\n  user: {}\n};\n\nMessage.propTypes = {\n  avatar: PropTypes.string,\n  text: PropTypes.string,\n  date: PropTypes.string,\n  user: PropTypes.object,\n  attachments: PropTypes.array,\n  isMe: PropTypes.bool,\n  isRead: PropTypes.bool,\n  isTyping: PropTypes.bool,\n  audio: PropTypes.string\n};\n\nexport default Message;\n","export default number => {\n  const mins = Math.floor(number / 60);\n  const secs = (number % 60).toFixed();\n  return `${mins < 10 ? \"0\" : \"\"}${mins}:${secs < 10 ? \"0\" : \"\"}${secs}`;\n};\n","import React from 'react';\nimport { Modal } from 'antd';\nimport PropTypes from 'prop-types';\nimport { Empty, Spin } from 'antd';\nimport classNames from 'classnames';\n\nimport { Message } from '../';\n\nimport './Messages.scss';\n\nconst Messages = ({\n  onRemoveMessage,\n  blockRef,\n  isLoading,\n  items,\n  user,\n  previewImage,\n  setPreviewImage,\n  blockHeight,\n  isTyping,\n  typingInDialogWithId,\n  partner,\n  me,\n  currentDialog\n}) => {\n  return (\n    <div className=\"chat__dialog-messages\" style={{ height: `calc(100% - ${blockHeight}px)` }}>\n      <div ref={blockRef} className={classNames('messages', { 'messages--loading': isLoading })}>\n        {isLoading && !user ? (\n          <Spin size=\"large\" tip=\"Загрузка сообщений...\" />\n        ) : items && !isLoading ? (\n          items.length > 0 ? (\n            items.map(item => {\n              return(\n              <Message\n                {...item}\n                date={item.createdAt}\n                dialog={item.dialog}\n                isMe={user._id === item.user._id}\n                partner={partner}\n                me={me}\n                isTyping={false}\n                onRemoveMessage={onRemoveMessage.bind(this, item._id)}\n                setPreviewImage={setPreviewImage}\n                key={item._id}\n              />\n            )})\n          ) : (\n            <Empty description=\"Диалог пуст\" className='chat__info-message'/>\n          )\n        ) : (\n          <Empty description=\"Откройте диалог\" className='chat__info-message'/>\n        )}\n        {isTyping && typingInDialogWithId===currentDialog._id &&\n        <Message \n            isTyping={true} \n            user={partner}         \n        />}\n        <Modal  className='image-preview' visible={!!previewImage} onCancel={() => setPreviewImage(null)} footer={null}>\n          <img src={previewImage} style={{ width: '100%' }} alt=\"Preview\" />\n        </Modal>\n      </div>\n    </div>\n  );\n};\n\nMessages.propTypes = {\n  items: PropTypes.array,\n};\n\nexport default Messages;\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport { Link } from \"react-router-dom\";\nimport { Emoji } from \"emoji-mart\";\nimport reactStringReplace from \"react-string-replace\";\nimport { timeFromNow } from \"utils/helpers\";\nimport { useSelector } from \"react-redux\";\n\nimport { IconRead, Avatar } from \"../\";\n\nconst renderLastMessage = (message, userId) => {\n  let text = \"\";\n  if (!message.text && message.attachments.length) {\n    text = \"прикрепленный файл\";\n  } else {\n    text = message.text;\n  }\n\n  return text[0] !== \":\"\n    ? `${message.user._id === userId ? \"Вы: \" : \"\"}${text}`\n    : `${message.user._id === userId ? \"Вы \" : \"\"}${text}`;\n};\n\nconst DialogItem = props => {\n  let {\n    _id,\n    unread,\n    isMe,\n    currentDialogId,\n    author,\n    partner,\n    lastMessage,\n    userId,\n    isTyping,\n  } = props;\n  let messages = useSelector(state => state.messages.items);\n  let allMessages = useSelector(state => state.messages.allItems);\n if (allMessages && allMessages.length) {\n   if (currentDialogId !== _id) {\n    unread = allMessages.filter(m => m.dialog === _id && m.user !== userId && !m.read).length\n   } \n   \n }\n\n  if (messages) {\n    let newLastMessage = messages.find(m => m._id === lastMessage._id);\n    if (newLastMessage) lastMessage = newLastMessage;\n  }\n\n  return (\n    <Link to={`/dialog/${_id}`}>\n      <div\n        className={classNames(\"dialogs__item\", {\n          \"dialogs__item--online\":\n            userId === partner._id ? author.isOnline : partner.isOnline,\n          \"dialogs__item--selected\": currentDialogId === _id\n        })}\n      >\n        <div className=\"dialogs__item-avatar\">\n          <Avatar user={userId === partner._id ? author : partner} />\n        </div>\n        <div className=\"dialogs__item-info\">\n          <div className=\"dialogs__item-info-top\">\n            <b className=\"dialogs__item-into-top-name\">\n              {userId === partner._id ? author.fullName : partner.fullName}\n            </b>\n            <span className=\"dialogs__item-into-top-time\">\n              {timeFromNow(lastMessage.createdAt)}\n            </span>\n          </div>\n          <div className=\"dialogs__item-info-bottom\">\n          {!isTyping ? \n          (<p>\n            {reactStringReplace(\n              renderLastMessage(lastMessage, userId),\n              /:(.+?):/g,\n              (match, i) => (\n                <Emoji key={i} emoji={match} set=\"apple\" size={16} />\n              )\n            )}\n          </p>)\n          : (<div className=\"message__typing\">\n              <span />\n              <span />\n              <span />\n          </div>)}\n            \n            {lastMessage.user._id === userId && (\n              <IconRead isMe={isMe} isRead={lastMessage.read} />\n            )}\n            {unread > 0 && (\n              <div className=\"dialogs__item-info-bottom-count\">\n                {unread > 9 ? \"+9\" : unread}\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </Link>\n  );\n};\n\nexport default DialogItem;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport format from \"date-fns/format\"\nimport isToday from \"date-fns/isToday\"\n\nconst Time = ({ date }) => {\n  if (isToday(new Date(date))) {\n    return(\n      <div className=\"message__time\">\n        {format(new Date(date),'HH:mm')}\n      </div>\n    );\n  } else {\n    return(\n      <div className=\"message__time\">\n        {format(new Date(date),'dd.MM')}\n      </div>\n    );\n  }\n}\n  \n\nTime.propTypes = {\n  date: PropTypes.string\n};\n\nexport default Time;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport readSvg from \"assets/img/read.svg\";\nimport unreadSvg from \"assets/img/unread.svg\";\n\nconst IconRead = ({ isMe, isRead }) =>\n  (isMe &&\n    (isRead ? (\n      <img className=\"message__icon-read\" src={readSvg} alt=\"Read icon\" />\n    ) : (\n      <img\n        className=\"message__icon-read message__icon-read--no\"\n        src={unreadSvg}\n        alt=\"Not read icon\"\n      />\n    ))) ||\n  null;\n\nIconRead.propTypes = {\n  isMe: PropTypes.bool,\n  isRead: PropTypes.bool\n};\n\nexport default IconRead;\n","import React from \"react\";\nimport orderBy from \"lodash/orderBy\";\nimport { Input, Empty } from \"antd\";\n\nimport { DialogItem } from \"../\";\n\nimport \"./Dialogs.scss\";\nimport { useSelector } from \"react-redux\";\n\nconst Dialogs = ({ items, userId, onSearch, inputValue, currentDialogId }) => {\n\n  // let allMessages = useSelector(state => state.messages.allMessages)\n  \n  let typingInDialogWithId = useSelector(state => state.dialogs.typingInDialogWithId)\n  \n  return(\n  <div className=\"dialogs\">\n    <div className=\"dialogs__search\">\n      <Input.Search\n       className='dialogs__search-input'\n        placeholder=\"Поиск среди контактов\"\n        onChange={e => onSearch(e.target.value)}\n        value={inputValue}\n      />\n      \n    </div>\n    {items.length ? (\n      orderBy(items, [\"created_at\"], [\"desc\"]).map(item => {\n        \n        return(\n        <DialogItem\n          key={item._id}\n          isTyping={item._id === typingInDialogWithId}\n          isMe={item.author._id === userId}\n          unread={item.unread}\n          userId={userId}\n          currentDialogId={currentDialogId}\n          {...item}\n\n        />\n      )})\n    ) : (\n      <Empty\n        image={Empty.PRESENTED_IMAGE_SIMPLE}\n        style={{color: 'rgba(255,255,255,.7)'}}\n        description=\"Ничего не найдено\"\n      />\n    )}\n  </div>\n)};\n\nexport default Dialogs;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { generateAvatarFromName } from \"utils/helpers\";\n\nimport \"./Avatar.scss\";\n\nconst Avatar = ({ user }) => {\n \n\n  if (user.avatar) {\n    return (\n      <img\n        className=\"avatar\"\n        src={user.avatar}\n        alt={`Avatar ${user.fullName}`}\n      />\n    );\n  } else {\n    const { color, colorLighten } = generateAvatarFromName(user.fullName);\n    const firstChar = user.fullName[0].toUpperCase();\n    return (\n      <div\n        style={{\n          background: `linear-gradient(135deg, ${color} 0%, ${colorLighten} 96.52%)`\n        }}\n        className=\"avatar avatar--symbol\">\n        {firstChar}\n      </div>\n\n    );\n  }\n  \n};\n\nAvatar.propTypes = {\n  className: PropTypes.string\n};\n\nexport default Avatar;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport {Modal, Icon} from 'antd'\n\nimport { generateAvatarFromName } from \"utils/helpers\";\nimport { Button } from 'antd'\nimport { UploadField } from \"@navjobs/upload\";\n\nimport \"../Avatar/Avatar.scss\";\nimport { useSelector } from \"react-redux\";\n\n\nconst AvatarMain = ({ user, onSelectAvatar, previewImage,setPreviewImage }) => {\n  let data  = useSelector(state => state.user.data)\n\n  if (user.avatar) {\n    return (\n      <div className='avatar-profile-container'>\n        <img\n          className=\"avatar-profile\"\n          src={user.avatar}\n          alt={`Avatar ${user.fullName}`}\n        />\n              <div className='avatar-profile-buttons'>\n        <div  className='avatar-profile-button'>\n          <UploadField\n              onFiles={(files) => onSelectAvatar(files,data)}\n              containerProps={{\n                className: \"chat-input__actions-upload-btn\"\n              }}\n              uploadProps={{\n                accept: \".jpg,.jpeg,.png,.gif,.bmp\",\n                multiple: \"multiple\"\n              }}\n            >\n          <Button className='avatar-profile-button-icon' type='circle'>\n              <Icon className='avatar-profile-button-icon' type='cloud-upload'/>\n          </Button>\n          </UploadField>\n        </div>\n        <div  className='avatar-profile-button'>\n        <Button className='avatar-profile-button-icon' type='circle' onClick={() => setPreviewImage(user.avatar)} title='Смотреть'>\n          <Icon className='avatar-profile-button-icon' type='eye'/>\n        </Button>\n        <Modal className='image-preview' visible={!!previewImage} onCancel={() => setPreviewImage(null)} footer={null}>\n          <img src={previewImage} style={{ width: '100%' }} alt=\"Preview\" />\n        </Modal>\n        \n        </div>\n       \n       \n        </div>\n      </div>\n      \n\n\n    );\n  } else {\n    const { color, colorLighten } = generateAvatarFromName(user.fullName);\n    const firstChar = user.fullName[0].toUpperCase();\n    return (\n      <div className='avatar-profile-container'>\n        <div\n          style={{\n            background: `linear-gradient(135deg, ${color} 0%, ${colorLighten} 96.52%)`\n          }}\n          className={`avatar-profile avatar--symbol`}>\n          {firstChar}\n        </div>\n        <div className='avatar-profile-buttons'>\n        <div  className='avatar-profile-button'>\n          <UploadField\n              onFiles={(files) => onSelectAvatar(files,data)}\n              containerProps={{\n                className: \"chat-input__actions-upload-btn\"\n              }}\n              uploadProps={{\n                accept: \".jpg,.jpeg,.png,.gif,.bmp\",\n                multiple: \"multiple\"\n              }}\n            >\n          <Button className='avatar-profile-button-icon' type='circle'>\n              <Icon className='avatar-profile-button-icon' type='cloud-upload'/>\n          </Button>\n          </UploadField>\n        </div>\n        <div  className='avatar-profile-button'>\n        <Button className='avatar-profile-button-icon' type='circle' onClick={() => setPreviewImage(user.avatar)} title='Смотреть' style={{opacity:'0'}}>\n          <Icon className='avatar-profile-button-icon' type='eye'/>\n        </Button>\n        </div>\n       \n       \n        </div>\n        \n      </div>\n\n\n    );\n  }\n\n};\n\nAvatarMain.propTypes = {\n  className: PropTypes.string\n};\n\nexport default AvatarMain;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { Button, Popover, Icon } from 'antd';\n\nimport './Status.scss';\nimport { useSelector } from 'react-redux';\nimport { timeFromNow } from 'utils/helpers'\n\n\n\nconst Status = ({ partner, deleteDialogById }) => {\n\n  let currentDialogId = useSelector(state => state.dialogs.currentDialogId)\n  return (\n    <div className=\"chat__dialog-header\">\n      <div className=\"chat__dialog-header-center\">\n        <b className=\"chat__dialog-header-username\">{partner.fullName}</b>\n        <div className=\"chat__dialog-header-status\">\n          {partner.isOnline ? <span className='status status--online'>В сети</span> : <span className='status--offline'>{timeFromNow(partner.last_seen)}</span>}\n\n        </div>\n      </div>\n      <Popover\n        className=\"chat__dialog-header-action\"\n        content={\n          <div>\n            <Button type='danger' onClick={() => deleteDialogById(currentDialogId)}>Удалить диалог</Button>\n          </div>\n        }\n        trigger=\"click\">\n        <div>\n          <Button type=\"link\" shape=\"circle\" >\n            <Icon type='ellipsis' style={{color: 'white'}}></Icon>\n          </Button>\n        </div>\n      </Popover>\n    </div>\n  )\n};\n\nStatus.propTypes = {\n  online: PropTypes.bool,\n};\n\nexport default Status;\n","import React, { Fragment } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Button, Input, Icon } from \"antd\";\nimport { UploadField } from \"@navjobs/upload\";\nimport { Picker } from \"emoji-mart\";\n\nimport { UploadFiles } from \"components\";\n\nimport \"./ChatInput.scss\";\n\nconst { TextArea } = Input;\n\nconst ChatInput = props => {\n  const {\n    emojiPickerVisible,\n    value,\n    addEmoji,\n    setValue,\n    handleSendMessage,\n    sendMessage,\n    toggleEmojiPicker,\n    attachments,\n    onSelectFiles,\n    isRecording,\n    onRecord,\n    onHideRecording,\n    removeAttachment,\n    isLoading,\n  } = props;\n  \n  return (\n    <Fragment>\n      <div className=\"chat-input\">\n        <div>\n          <div className=\"chat-input__smile-btn\">\n            <div className=\"chat-input__emoji-picker\">\n              {emojiPickerVisible && (\n                <Picker onSelect={emojiTag => addEmoji(emojiTag)} set=\"apple\" />\n              )}\n            </div>\n            <Button\n              className=\"chat-input-button\"\n              onClick={toggleEmojiPicker}\n              type=\"link\"\n              shape=\"circle\"\n            >\n              <Icon type='smile' className='chat-input-icon'/>\n            </Button>\n          </div>\n          {isRecording ? (\n            <div className=\"chat-input__record-status\">\n              <i className=\"chat-input__record-status-bubble\"></i>\n              Recording...\n              <Button\n                onClick={onHideRecording}\n                type=\"link\"\n                shape=\"circle\"\n                className=\"stop-recording chat-input-button\"\n              >\n                 <Icon type='close' className='chat-input-icon'/>\n              </Button>\n            </div>\n          ) : (\n            <TextArea\n              onChange={e => setValue(e.target.value)}\n              id='chatTextarea'\n              onKeyUp={handleSendMessage}\n              className='chat-input-textarea'\n              size=\"large\"\n              placeholder=\"Введите текст сообщения…\"\n              value={value}\n              autoSize={{ minRows: 1, maxRows: 6 }}\n            />\n          )}\n\n          <div className=\"chat-input__actions\">\n            <UploadField\n              onFiles={onSelectFiles}\n              containerProps={{\n                className: \"chat-input__actions-upload-btn\"\n              }}\n              uploadProps={{\n                accept: \".jpg,.jpeg,.png,.gif,.bmp\",\n                multiple: \"multiple\"\n              }}\n            >\n              <Button  className='chat-input__button' type=\"link\" shape=\"circle\">\n                  <Icon type='camera' className='chat-input-icon'/>\n              </Button>\n            </UploadField>\n            {isLoading ? (\n              <Button  className='chat-input__button' type=\"link\" shape=\"circle\"><Icon type='loading' className='chat-input-icon'/></Button>\n            ) : isRecording || value || attachments.length ? (\n              <Button\n                className='chat-input__button'\n                onClick={sendMessage}\n                type=\"link\"\n                shape=\"circle\"\n              > <Icon type='check-circle' className='chat-input-icon' /></Button>\n            ) : (\n              <div className=\"chat-input__record-btn\">\n                <Button\n                  className='chat-input__button'\n                  onClick={onRecord}\n                  type=\"link\"\n                  shape=\"circle\"\n                >\n                   <Icon type='audio' className='chat-input-icon' />\n                </Button>\n              </div>\n            )}\n          </div>\n        </div>\n        {attachments.length > 0 && (\n          <div className=\"chat-input__attachments\" style={{position: 'relative',top:'-180px'}}>\n            <UploadFiles\n              removeAttachment={removeAttachment}\n              attachments={attachments}\n            />\n          </div>\n        )}\n      </div>\n    </Fragment>\n  );\n};\n\nChatInput.propTypes = {\n  className: PropTypes.string\n};\n\nexport default ChatInput;\n","import React from \"react\";\nimport { Form, Icon, Input } from \"antd\";\n\nimport { validateField } from \"utils/helpers\";\n\nconst FormField = ({\n  name,\n  placeholder,\n  icon,\n  type,\n  handleChange,\n  handleBlur,\n  touched,\n  errors,\n  values\n}) => {\n  return (\n    <Form.Item\n      validateStatus={validateField(name, touched, errors)}\n      help={!touched[name] ? \"\" : errors[name]}\n      hasFeedback\n    >\n      <Input\n        id={name}\n        prefix={<Icon type={icon} style={{ color: \"rgba(0,0,0,.25)\" }} />}\n        size=\"large\"\n        placeholder={placeholder}\n        value={values[name]}\n        onChange={handleChange}\n        onBlur={handleBlur}\n        type={type}\n      />\n    </Form.Item>\n  );\n};\n\nexport default FormField;\n","import React, { useState, useEffect } from \"react\";\nimport { Upload, Modal } from \"antd\";\n\nfunction getBase64(file) {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onload = () => resolve(reader.result);\n    reader.onerror = error => reject(error);\n  });\n}\n\nconst UploadFiles = ({ attachments, removeAttachment }) => {\n  const [state, setState] = useState({\n    previewVisible: false,\n    previewImage: \"\",\n    fileList: attachments\n  });\n\n  useEffect(() => {\n    setState({\n      ...state,\n      fileList: attachments\n    });\n  }, [attachments]);\n\n  const handleCancel = () => setState({ ...state, previewVisible: false });\n\n  const handlePreview = async file => {\n    if (!file.url && !file.preview) {\n      file.preview = await getBase64(file.originFileObj);\n    }\n\n    setState({\n      ...state,\n      previewImage: file.url || file.preview,\n      previewVisible: true\n    });\n  };\n\n  const handleChange = ({ fileList }) =>\n    setState({\n      ...state,\n      fileList\n    });\n\n  return (\n    <div className=\"clearfix\">\n      <Upload\n        action=\"https://www.mocky.io/v2/5cc8019d300000980a055e76\"\n        listType=\"picture-card\"\n        fileList={state.fileList}\n        onPreview={handlePreview}\n        onChange={handleChange}\n        onRemove={file => removeAttachment(file)}\n      />\n      <Modal\n        className='image-preview'\n        visible={state.previewVisible}\n        footer={null}\n        onCancel={handleCancel}\n      >\n        <img alt=\"example\" style={{ width: \"100%\" }} src={state.previewImage} />\n      </Modal>\n    </div>\n  );\n};\n\nUploadFiles.defaultProps = {\n  attachments: []\n};\n\nexport default UploadFiles;\n","import React from \"react\";\nimport { Form, Icon, Input } from \"antd\";\nimport { Link } from \"react-router-dom\";\n\nimport { Button, Block } from \"components\";\nimport { validateField } from \"utils/helpers\";\n\nconst LoginForm = props => {\n  const {\n    values,\n    touched,\n    errors,\n    handleChange,\n    handleBlur,\n    handleSubmit,\n    isValid,\n    isSubmitting\n  } = props;\n  return (\n    <div>\n      <div className=\"auth__top\">\n        <h2 className='auth__top-header'>Войти в аккаунт</h2>\n        <p className='auth__top-sub-header'>Пожалуйста, войдите в свой аккаунт</p>\n      </div>\n      <Block>\n        <Form onSubmit={handleSubmit} className=\"login-form\">\n          <Form.Item\n            validateStatus={validateField(\"email\", touched, errors)}\n            help={!touched.email ? \"\" : errors.email}\n            hasFeedback\n          >\n            <Input\n              id=\"email\"\n              prefix={<Icon type=\"mail\" style={{ color: \"rgba(0,0,0,.25)\" }} />}\n              size=\"large\"\n              placeholder=\"E-Mail\"\n              value={values.email}\n              onChange={handleChange}\n              onBlur={handleBlur}\n            />\n          </Form.Item>\n          <Form.Item\n            validateStatus={validateField(\"password\", touched, errors)}\n            help={!touched.password ? \"\" : errors.password}\n            hasFeedback\n          >\n            <Input\n              id=\"password\"\n              prefix={<Icon type=\"lock\" style={{ color: \"rgba(0,0,0,.25)\" }} />}\n              size=\"large\"\n              type=\"password\"\n              placeholder=\"Пароль\"\n              value={values.password}\n              onChange={handleChange}\n              onBlur={handleBlur}\n            />\n          </Form.Item>\n          <Form.Item>\n            {isSubmitting && !isValid && <span>Ошибка!</span>}\n            <Button\n              disabled={isSubmitting}\n              onClick={handleSubmit}\n              type=\"primary\"\n              size=\"large\"\n            >\n              Войти в аккаунт\n            </Button>\n          </Form.Item>\n          <Link className=\"auth__register-link\" to=\"/signup\">\n            Зарегистрироваться\n          </Link>\n        </Form>\n      </Block>\n    </div>\n  );\n};\n\nexport default LoginForm;\n","export default ({ isAuth, values, errors }) => {\n  const rules = {\n    email: value => {\n      if (!value) {\n        errors.email = \"Введите E-Mail\";\n      } else if (!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(value)) {\n        errors.email = \"Неверный E-Mail\";\n      }\n    },\n    password: value => {\n      if (!value) {\n        errors.password = \"Введите пароль\";\n      } else if (\n        !isAuth &&\n        !/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{8,})/.test(value)\n      ) {\n        errors.password = \"Пароль должен включать: 6 или больше символов, минимум одну строчную и одну заглавную буквы\";\n      }\n    },\n    password_2: value => {\n      if (!isAuth && value !== values.password) {\n        errors.password_2 = \"Пароли не совпадают\";\n      } else if (!value) {\n        errors.password_2 = \"Повторите пароль\";\n      }\n    },\n    fullName: value => {\n      if (!isAuth && !value) {\n        errors.fullName = \"Укажите свое имя и фамилию\";\n      }\n    }\n  };\n\n  Object.keys(values).forEach(key => rules[key] && rules[key](values[key]));\n};\n","import { createStore, applyMiddleware, compose } from \"redux\";\nimport thunk from \"redux-thunk\";\n\nimport rootReducer from \"./reducers\";\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nconst middleware = [thunk];\n\nconst store = createStore(\n  rootReducer,\n  composeEnhancers(applyMiddleware(...middleware))\n);\n\nexport default store;\n","import LoginForm from \"./containers/LoginForm\";\n\nexport default LoginForm;\n","import { withFormik } from 'formik';\n\nimport LoginForm from '../components/LoginForm';\n\nimport validateForm from 'utils/validate';\nimport { userActions } from 'redux/actions';\n\nimport store from 'redux/store';\n\nconst LoginFormContainer = withFormik({\n  enableReinitialize: true,\n  mapPropsToValues: () => ({\n    email: '',\n    password: '',\n  }),\n  validate: values => {\n    let errors = {};\n\n    validateForm({ isAuth: true, values, errors });\n\n    return errors;\n  },\n  handleSubmit: (values, { setSubmitting, props }) => {\n    store\n      .dispatch(userActions.fetchUserLogin(values))\n      .then(({ status }) => {\n        if (status === 'success') {\n          props.history.push('/');\n        }\n        setSubmitting(false);\n      })\n      .catch(() => {\n        setSubmitting(false);\n      });\n  },\n  displayName: 'LoginForm',\n})(LoginForm);\n\nexport default LoginFormContainer;\n","import React from \"react\";\nimport { Form, Icon } from \"antd\";\nimport { Link } from \"react-router-dom\";\n\nimport { Button, Block, FormField } from \"components\";\n\nconst success = false;\n\nconst RegisterForm = props => {\n  const {\n    values,\n    touched,\n    errors,\n    handleChange,\n    handleBlur,\n    handleSubmit,\n    isValid,\n    isSubmitting\n  } = props;\n  return (\n    <div>\n      <div className=\"auth__top\">\n        <h2>Регистрация</h2>\n        <p>Для входа в чат, вам нужно зарегистрироваться</p>\n      </div>\n      <Block>\n        {!success ? (\n          <Form onSubmit={handleSubmit} className=\"login-form\">\n            <FormField\n              name=\"email\"\n              icon=\"mail\"\n              placeholder=\"E-Mail\"\n              handleChange={handleChange}\n              handleBlur={handleBlur}\n              touched={touched}\n              errors={errors}\n              values={values}\n            />\n\n            <FormField\n              name=\"fullName\"\n              icon=\"user\"\n              placeholder=\"Ваше имя и фамилия\"\n              handleChange={handleChange}\n              handleBlur={handleBlur}\n              touched={touched}\n              errors={errors}\n              values={values}\n            />\n\n            <FormField\n              name=\"password\"\n              icon=\"lock\"\n              placeholder=\"Пароль\"\n              type=\"password\"\n              handleChange={handleChange}\n              handleBlur={handleBlur}\n              touched={touched}\n              errors={errors}\n              values={values}\n            />\n\n            <FormField\n              name=\"password_2\"\n              icon=\"lock\"\n              placeholder=\"Повторите пароль\"\n              type=\"password\"\n              handleChange={handleChange}\n              handleBlur={handleBlur}\n              touched={touched}\n              errors={errors}\n              values={values}\n            />\n\n            <Form.Item>\n              {isSubmitting && !isValid && <span>Ошибка!</span>}\n              <Button\n                disabled={isSubmitting}\n                onClick={handleSubmit}\n                type=\"primary\"\n                size=\"large\"\n              >\n                Зарегистрироваться\n              </Button>\n            </Form.Item>\n            <Link className=\"auth__register-link\" to=\"/signin\">\n              Войти в аккаунт\n            </Link>\n          </Form>\n        ) : (\n          <div className=\"auth__success-block\">\n            <div>\n              <Icon type=\"info-circle\" theme=\"twoTone\" />\n            </div>\n            <h2>Подтвердите свой аккаунт</h2>\n            <p>\n              На Вашу почту отправлено письмо с ссылкой на подтверждение\n              аккаунта.\n            </p>\n          </div>\n        )}\n      </Block>\n    </div>\n  );\n};\n\nexport default RegisterForm;\n","import RegisterForm from \"./containers/RegisterForm\";\n\nexport default RegisterForm;\n","import { withFormik } from 'formik';\nimport get from 'lodash/get';\n\nimport RegisterForm from '../components/RegisterForm';\n\nimport { userActions } from 'redux/actions';\nimport validateForm from 'utils/validate';\nimport { openNotification } from 'utils/helpers';\n\nimport store from 'redux/store';\n\nexport default withFormik({\n  enableReinitialize: true,\n  mapPropsToValues: () => ({\n    email: '',\n    fullName: '',\n    password: '',\n    password_2: ''\n  }),\n  validate: values => {\n    let errors = {};\n    validateForm({ isAuth: false, values, errors });\n    return errors;\n  },\n  handleSubmit: (values, { setSubmitting, props }) => {\n    store\n      .dispatch(userActions.fetchUserRegister(values))\n      .then(() => {\n        props.history.push('/signup/verify');\n        setSubmitting(false);\n      })\n      .catch(err => {\n        if (get(err, 'response.data.message.errmsg', '').indexOf('dup') >= 0) {\n          openNotification({\n            title: 'Ошибка',\n            text: 'Аккаунт с такой почтой уже создан.',\n            type: 'error',\n            duration: 5000\n          });\n        } else {\n          openNotification({\n            title: 'Ошибка',\n            text: 'Возникла серверная ошибка при регистрации. Повторите позже.',\n            type: 'error',\n            duration: 5000\n          });\n        }\n        setSubmitting(false);\n      });\n  },\n  displayName: 'RegisterForm'\n})(RegisterForm);\n","import React, { useEffect, useState } from 'react';\nimport { Result, Button, Spin } from 'antd';\n\nimport { userApi } from 'utils/api';\nimport { Block } from 'components';\n\nconst renderTextInfo = ({ hash, verified }) => {\n  if (hash) {\n    if (verified) {\n      return {\n        status: 'success',\n        title: 'Готово!',\n        message: 'Аккаунт успешно подтвержден!',\n      };\n    } else {\n      return {\n        status: 'error',\n        title: 'Ошибка',\n        message: 'Вы указали несуществующий или неверный хеш.',\n      };\n    }\n  } else {\n    return {\n      status: 'info',\n      title: 'Подтвердите почту',\n      message: 'Ссылка с подтверждением аккаунта отправлена на E-Mail.',\n    };\n  }\n};\n\nconst CheckEmailInfo = ({ location, history }) => {\n  const hash = location.search.split('hash=')[1];\n  const [verified, setVerified] = useState(false);\n  const [checking, setChecking] = useState(!!hash);\n  const [info, setInfo] = useState(renderTextInfo({ hash, checking, verified }));\n\n  const setStatus = ({ checking, verified }) => {\n    setInfo(renderTextInfo({ hash, checking, verified }));\n    setVerified(verified);\n    setChecking(checking);\n  };\n\n  useEffect(() => {\n    if (hash) {\n      userApi\n        .verifyHash(hash)\n        .then(() => {\n          setStatus({ verified: true, checking: false });\n        })\n        .catch(() => {\n          setStatus({ verified: false, checking: false });\n        });\n    }\n  }, []);\n\n  console.log({ info, checking, verified, hash });\n\n  return (\n    <div className=\"verify-block\">\n      <Block>\n        {!checking ? (\n          <Result\n            status={info.status}\n            title={info.title}\n            subTitle={info.message}\n            extra={\n              info.status === 'success' &&\n              verified && (\n                <Button type=\"primary\" className='success-verification' onClick={() => history.push('/signin')}>\n                  Войти\n                </Button>\n              )\n            }\n          />\n        ) : (\n          <div className=\"verify-block__loading\">\n            <Spin size=\"large\" />\n          </div>\n        )}\n      </Block>\n    </div>\n  );\n};\n\nexport default CheckEmailInfo;\n","import React from \"react\";\nimport { Route } from \"react-router-dom\";\n\nimport { LoginForm, RegisterForm } from \"modules\";\nimport CheckEmailInfo from \"./components/CheckEmailInfo\";\n\nimport \"./Auth.scss\";\n\nconst Auth = () => (\n  <section className=\"auth\">\n    <div className=\"auth__content\">\n      <Route exact path=\"/signin\" component={LoginForm} />\n      <Route exact path=\"/signup\" component={RegisterForm} />\n      <Route exact path=\"/signup/verify\" component={CheckEmailInfo} />\n    </div>\n  </section>\n);\n\nexport default Auth;\n","import React, { useEffect } from 'react';\nimport { withRouter } from 'react-router';\nimport { Messages, ChatInput, Status, Sidebar } from 'containers';\nimport { connect } from 'react-redux';\nimport { userActions, messagesActions } from 'redux/actions'\nimport { userApi } from 'utils/api'\n\nimport './Home.scss';\n\nimport { dialogsActions } from 'redux/actions';\n\nconst Home = props => {\n  let { setCurrentDialogId, user, setOnline, setOffline } = props;\n  if (user && !user.isOnline) {setOnline(user); userApi.setOnline(user)}\n  \n  document.addEventListener('onunload',() => {\n    setOffline(user)\n    userApi.setOffline(user)\n  })\n \n  useEffect(() => {\n    const { pathname } = props.location;\n    const dialogId = pathname.split('/').pop();\n    setCurrentDialogId(dialogId);\n  }, [props.location.pathname]);\n  \n  return (\n    <section className=\"home\">\n      <div className=\"chat\">\n        <Sidebar me={user}/>\n        {user && (\n          <div className=\"chat__dialog\">\n            <Status history={props.history}/>\n            <Messages me={user}/>\n            <div className=\"chat__dialog-input\" >\n              <ChatInput />\n            </div>\n          </div>\n        )}\n      </div>\n    </section>\n  );\n};\n\nexport default withRouter(\n  connect(\n    ({ user }) => ({ user: user.data }),\n    { ...dialogsActions, ...userActions, ...messagesActions }\n  )(Home),\n);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { Route, Redirect, Switch } from \"react-router-dom\";\n\nimport { Auth, Home } from \"pages\";\n\nconst App = props => {\n  const { isAuth } = props;\n  return (\n    <div className=\"wrapper\">\n      <Switch>\n        <Route\n          exact\n          path={[\"/signin\", \"/signup\", \"/signup/verify\"]}\n          component={Auth}\n        />\n        <Route\n          path=\"/\"\n          render={() => (isAuth ? <Home /> : <Redirect to=\"/signin\" />)}\n        />\n      </Switch>\n    </div>\n  );\n};\n\nexport default connect(({ user }) => ({ isAuth: user.isAuth }))(App);\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport { Provider } from \"react-redux\";\n\nimport App from \"./App\";\nimport { userActions } from \"redux/actions\";\n\nimport store from \"redux/store\";\n\nimport \"./styles/index.scss\";\nimport \"emoji-mart/css/emoji-mart.css\";\n\nstore.dispatch(userActions.fetchUserData());\n\nReactDOM.render(\n  <Provider store={store}>\n    <Router>\n      <App />\n    </Router>\n  </Provider>,\n  document.getElementById(\"root\")\n);\n","import { combineReducers } from \"redux\";\n\nconst reducers = [\"messages\", \"dialogs\", \"user\", \"attachments\"];\n\nexport default combineReducers(\n  reducers.reduce((initial, name) => {\n    initial[name] = require(`./${name}`).default;\n    return initial;\n  }, {})\n);\n"],"sourceRoot":""}